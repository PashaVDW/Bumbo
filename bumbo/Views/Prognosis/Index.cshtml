﻿@{
    ViewData["Title"] = "Prognosis";
    var today = DateTime.Today;
    var culture = System.Globalization.CultureInfo.CurrentCulture;
    var weekNumber = culture.Calendar.GetWeekOfYear(today, System.Globalization.CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday);
    var startOfWeek = today.AddDays(-(int)today.DayOfWeek + (int)DayOfWeek.Monday);
    var dates = Enumerable.Range(0, 7).Select(d => startOfWeek.AddDays(d)).ToList();
}

@if (ViewBag.prognoseLijst != null)
{
    <table class="table">
        <thead>
            <tr>
                <th>Dag</th>
                <th>Aantal Verwachte Klanten</th>
                <th>Aantal Verwachte Collies</th>
            </tr>
        </thead>
        <tbody>
            @for (int i = 0; i < ViewBag.prognoseLijst.Count; i++)
            {
                <tr>
                    <td>@ViewBag.prognoseLijst[i].Name</td>
                    <td>@ViewBag.prognoseLijst[i].CustomerAmount</td>
                    <td>@ViewBag.prognoseLijst[i].Packages</td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <p>No data available.</p>
}
<div class="grid grid-cols-3 gap-4 mt-20 mx-auto max-w-screen-lg">
    <div class="space-y-1" name="prognoses_title">
        <h1 class="font-bold">Prognose</h1>
        <h3>Week @weekNumber</h3>
    </div>
    <div></div>
    <div class="flex justify-end">
        <default-button onclick="window.location.href='Prognosis/edit';" button-text="bewerk deze prognose" button-type="primary"></default-button>
    </div>
</div>

<div class="flex items-center justify-between mt-8 mx-auto max-w-screen-lg">
    <button class="text-2xl">&#10094;</button>

    <div class="grid grid-cols-7 gap-4">
        @for (int i = 0; i < dates.Count; i++)
        {
            <div class="p-4 text-center">
                <h1>@dates[i].Day</h1>
                <h5>@dates[i].ToString("ddd")</h5>
                <h2>Totaal Benodigde Uren: -</h2>
                <h2>Medewerkers: -</h2>
            </div>
        }
    </div>

    <button class="text-2xl">&#10095;</button>
</div>

<div class="grid grid-cols-7 gap-4 mt-8 mx-auto max-w-screen-lg">
    @for (int i = 0; i < dates.Count; i++)
    {
        <div class="flex flex-col items-center">
            <div class="font-bold">@dates[i].ToString("dddd")</div>

            <div class="grid grid-cols-2 gap-2 mt-2">
                <label class="text-center">Uur</label>
                <label class="text-center">Medewerkers</label>
            </div>

            <div class="grid grid-cols-2 gap-2 mt-2">
                <input type="number" class="p-2 border" />
                <input type="number" class="p-2 border" />
            </div>

            <div class="grid grid-cols-2 gap-2 mt-2">
                <input type="number" class="p-2 border" />
                <input type="number" class="p-2 border" />
            </div>

            <div class="grid grid-cols-2 gap-2 mt-2">
                <input type="number" class="p-2 border" />
                <input type="number" class="p-2 border" />
            </div>
        </div>
    }
</div>

<!-- Message when theresno prognosis -->
<div class="mt-8 flex items-start">
    <div class="flex flex-col ml-64 space-y-4">
        <span>Kassa</span>
        <span>Vakkenvullen</span>
        <span>Vers</span>
    </div>
</div>

<div class="flex flex-col items-center mt-8 align-items-center">
    <h2 class="text-2xl font-bold">Er Is nog geen prognose voor deze week</h2>
    <div class="mt-4">
        <default-button onclick="window.location.href='prognosis/create';" button-text="Maak een Prognose" button-type="primary"></default-button>
    </div>
</div>