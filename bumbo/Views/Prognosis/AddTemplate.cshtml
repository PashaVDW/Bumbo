@model List<bumbo.Models.Template>

@{
    ViewData["Title"] = "Add Template";
}

<div class="flex flex-col items-center justify-center min-h-screen bg-gray-100">
    <h1 class="text-lg font-semibold mb-6">Kies een standaard template</h1>

    <div class="w-full max-w-md space-y-4" id="templateList">
        @foreach (var template in Model)
        {
            <div class="flex items-center justify-between bg-white border rounded-md shadow-sm px-4 py-2 template-item" data-template-id="@template.Id">
                <span>@template.Name</span>
                <button class="px-4 py-1 text-white bg-gray-600 rounded hover:bg-gray-700 kiezen-button" data-template-id="@template.Id">
                    Kiezen
                </button>
            </div>
        }
    </div>

    <div class="flex space-x-4 mt-6">
        <a asp-action="Create" asp-controller="Prognosis" class="px-6 py-2 text-gray-800 bg-white border border-gray-400 rounded hover:bg-gray-100">
            Terug
        </a>
        <button id="importButton" class="px-6 py-2 text-white bg-gray-800 rounded hover:bg-gray-900 disabled:opacity-50" disabled>
            Importeren
        </button>
    </div>
</div>

<script>
    let selectedTemplateId = null;

    document.querySelectorAll('.kiezen-button').forEach(button => {
        button.addEventListener('click', function () {
            document.querySelectorAll('.template-item').forEach(item => {
                item.classList.remove('bg-gray-200');
            });
            const templateItem = this.closest('.template-item');
            templateItem.classList.add('bg-gray-200');

            selectedTemplateId = this.getAttribute('data-template-id');

            document.getElementById('importButton').removeAttribute('disabled');
        });
    });

    document.getElementById('importButton').addEventListener('click', function () {
        if (selectedTemplateId) {
            const url = `/Prognosis/Create?templateId=${selectedTemplateId}`;
            window.location.href = url;
        }
    });
</script>
